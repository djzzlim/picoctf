# [Unminify](https://play.picoctf.org/practice/challenge/426)

## Challenge Information

- **Category**: Web Exploitation
- **Difficulty**: Easy
- **Description**: I don't like scrolling down to read the code of my website, so I've squished it. As a bonus, my pages load faster!

## Solution Overview

This challenge involves finding a flag hidden in minified HTML code. Minification is a technique used to remove unnecessary characters (whitespace, comments, etc.) from code to reduce file size and improve load times. The flag is hidden as text content within an HTML paragraph element, but the minified format makes it difficult to spot without proper examination.

## Hints

1. Try CTRL+U / ⌘+U in your browser to view the page source. You can also add 'view-source:' before the URL, or try `curl <URL>` in your shell.
2. Minification reduces the size of code, but does not change its functionality.
3. What tools do developers use when working on a website? Many text editors and browsers include formatting.

## Detailed Walkthrough

### Step 1: Understanding the Challenge

The challenge description mentions that the website's code has been "squished" (minified) to make it load faster. This suggests we need to examine the HTML source code to find the flag.

### Step 2: Viewing the Source Code

There are several ways to view the source code of a webpage:

1. Press CTRL+U (Windows/Linux) or ⌘+U (Mac) in your browser
2. Prefix the URL with "view-source:" in your browser
3. Use the `curl` command in a terminal to fetch the raw HTML

Let's use one of these methods to examine the page source.

### Step 3: Finding the Flag in the Minified Code

When we look at the HTML source, we see it's all compressed into a single line without proper formatting:

```html
<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>picoCTF - picoGym | Unminify Challenge</title><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><style>body{font-family:"Lucida Console",Monaco,monospace}h1,p{color:#000}</style></head><body class="picoctf{}" style="margin:0"><div class="picoctf{}" style="margin:0;padding:0;background-color:#757575;display:auto;height:40%"><a class="picoctf{}" href="/"><img src="picoctf-logo-horizontal-white.svg" alt="picoCTF logo" style="display:inline-block;width:160px;height:90px;padding-left:30px"></a></div><center><br class="picoctf{}"><br class="picoctf{}"><div class="picoctf{}" style="padding-top:30px;border-radius:3%;box-shadow:0 5px 10px #0000004d;width:50%;align-self:center"><img class="picoctf{}" src="hero.svg" alt="flag art" style="width:150px;height:150px"><div class="picoctf{}" style="width:85%"><h2 class="picoctf{}">Welcome to my flag distribution website!</h2><div class="picoctf{}" style="width:70%"><p class="picoctf{}">If you're reading this, your browser has succesfully received the flag.</p><p class="picoCTF{pr3tty_c0d3_622b2c88}"></p><p class="picoctf{}">I just deliver flags, I don't know how to read them...</p></div></div><br class="picoctf{}"></div></center></body></html>
```

Despite the minification, we can carefully read through the code and spot something interesting: `<p class="picoCTF{pr3tty_c0d3_622b2c88}"></p>`. This appears to be an empty paragraph element with a class name that matches the flag format.

### Step 4: Extracting the Flag with Tools (Alternative Method)

We can also use the `curl` command combined with `grep` to automatically extract the flag:

```bash
curl -s http://titan.picoctf.net:57770/ | grep -oP "picoCTF\{[^}]+\}"
```

This command:
1. Uses `curl` to fetch the webpage content silently (`-s` flag)
2. Pipes the output to `grep`
3. Uses `grep` with Perl-compatible regular expressions (`-P` flag) to search for:
   - The string "picoCTF{"
   - Followed by any characters that are not a closing brace (`[^}]+`)
   - Followed by a closing brace (`\}`)
4. The `-o` flag tells `grep` to only output the matched text

The result is: `picoCTF{pr3tty_c0d3_622b2c88}`

## Flag

```
picoCTF{pr3tty_c0d3_622b2c88}
```

## Learning Points

- **Code Minification**: Understanding how and why code is minified in web development
- **HTML Source Inspection**: Various methods to view the source code of a webpage
- **Regular Expressions**: Using regex to efficiently search for patterns in text
- **Command-Line Tools**: Utilizing tools like `curl` and `grep` for efficient web analysis
- **Hidden Information**: Web pages may contain information hidden from normal view but accessible in the source code

## Mitigation Strategies

To prevent sensitive information exposure in minified code:

- **Don't hide sensitive data in HTML/CSS/JS**: Anything sent to the client's browser can be viewed by users

## References

- [Using `curl` for Web Scraping](https://curl.se/docs/manual.html)
- [Regular Expressions with `grep`](https://www.gnu.org/software/grep/manual/grep.html)